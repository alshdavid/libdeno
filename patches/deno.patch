diff --git a/.cargo/config.toml b/.cargo/config.toml
index ec13c66..9ecde7e 100644
--- a/.cargo/config.toml
+++ b/.cargo/config.toml
@@ -20,7 +20,7 @@ rustflags = [
 [target.aarch64-apple-darwin]
 rustflags = [
   "-C",
-  "link-args=-fuse-ld=lld -weak_framework Metal -weak_framework MetalPerformanceShaders -weak_framework QuartzCore -weak_framework CoreGraphics",
+  "link-args=-weak_framework Metal -weak_framework MetalPerformanceShaders -weak_framework QuartzCore -weak_framework CoreGraphics",
 ]
 
 [target.'cfg(all())']
diff --git a/Cargo.toml b/Cargo.toml
index bf5dae9..658874d 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -3,6 +3,7 @@
 [workspace]
 resolver = "2"
 members = [
+  "libdeno",
   "bench_util",
   "cli",
   "cli/lib",
diff --git a/cli/Cargo.toml b/cli/Cargo.toml
index 7903952..e9e68c4 100644
--- a/cli/Cargo.toml
+++ b/cli/Cargo.toml
@@ -11,6 +11,11 @@ license.workspace = true
 repository.workspace = true
 description = "Provides the deno executable"
 
+[lib]
+name = "libdeno"
+path = "main.rs"
+doc = false
+
 [[bin]]
 name = "deno"
 path = "main.rs"
diff --git a/cli/main.rs b/cli/main.rs
index 5f34ee2..3099328 100644
--- a/cli/main.rs
+++ b/cli/main.rs
@@ -1,28 +1,28 @@
 // Copyright 2018-2026 the Deno authors. MIT license.
 
-mod args;
-mod cache;
-mod cdp;
-mod factory;
-mod file_fetcher;
-mod graph_container;
-mod graph_util;
-mod http_util;
-mod jsr;
-mod lsp;
-mod module_loader;
-mod node;
-mod npm;
-mod ops;
-mod registry;
-mod resolver;
-mod standalone;
-mod task_runner;
-mod tools;
-mod tsc;
-mod type_checker;
-mod util;
-mod worker;
+pub mod args;
+pub mod cache;
+pub mod cdp;
+pub mod factory;
+pub mod file_fetcher;
+pub mod graph_container;
+pub mod graph_util;
+pub mod http_util;
+pub mod jsr;
+pub mod lsp;
+pub mod module_loader;
+pub mod node;
+pub mod npm;
+pub mod ops;
+pub mod registry;
+pub mod resolver;
+pub mod standalone;
+pub mod task_runner;
+pub mod tools;
+pub mod tsc;
+pub mod type_checker;
+pub mod util;
+pub mod worker;
 
 pub mod sys {
   #[allow(clippy::disallowed_types)] // ok, definition
@@ -39,22 +39,22 @@ use std::path::PathBuf;
 use std::sync::Arc;
 
 use args::TaskFlags;
-use deno_core::anyhow::Context;
-use deno_core::error::AnyError;
-use deno_core::futures::FutureExt;
-use deno_core::unsync::JoinHandle;
+pub use deno_core::anyhow::Context;
+pub use deno_core::error::AnyError;
+pub use deno_core::futures::FutureExt;
+pub use deno_core::unsync::JoinHandle;
 use deno_lib::util::result::any_and_jserrorbox_downcast_ref;
 use deno_lib::util::result::js_error_downcast_ref;
-use deno_lib::worker::LibWorkerFactoryRoots;
+pub use deno_lib::worker::LibWorkerFactoryRoots;
 use deno_resolver::npm::ByonmResolvePkgFolderFromDenoReqError;
 use deno_resolver::npm::ResolvePkgFolderFromDenoReqError;
-use deno_runtime::UnconfiguredRuntime;
+pub use deno_runtime::UnconfiguredRuntime;
 use deno_runtime::WorkerExecutionMode;
 use deno_runtime::fmt_errors::format_js_error;
-use deno_runtime::tokio_util::create_and_run_current_thread_with_maybe_metrics;
+pub use deno_runtime::tokio_util::create_and_run_current_thread_with_maybe_metrics;
 use deno_telemetry::OtelConfig;
-use deno_terminal::colors;
-use factory::CliFactory;
+pub use deno_terminal::colors;
+pub use factory::CliFactory;
 
 const MODULE_NOT_FOUND: &str = "Module not found";
 const UNSUPPORTED_SCHEME: &str = "Unsupported scheme";
@@ -62,12 +62,12 @@ const UNSUPPORTED_SCHEME: &str = "Unsupported scheme";
 use self::util::draw_thread::DrawThread;
 use crate::args::CompletionsFlags;
 use crate::args::DenoSubcommand;
-use crate::args::Flags;
+pub use crate::args::Flags;
 use crate::args::flags_from_vec_with_initial_cwd;
-use crate::args::get_default_v8_flags;
-use crate::util::display;
+pub use crate::args::get_default_v8_flags;
+pub use crate::util::display;
 use crate::util::v8::get_v8_flags_from_env;
-use crate::util::v8::init_v8_flags;
+pub use crate::util::v8::init_v8_flags;
 use crate::util::watch_env_tracker::WatchEnvTracker;
 use crate::util::watch_env_tracker::load_env_variables_from_env_files;
 
@@ -76,7 +76,7 @@ use crate::util::watch_env_tracker::load_env_variables_from_env_files;
 static ALLOC: dhat::Alloc = dhat::Alloc;
 
 /// Ensures that all subcommands return an i32 exit code and an [`AnyError`] error type.
-trait SubcommandOutput {
+pub trait SubcommandOutput {
   fn output(self) -> Result<i32, AnyError>;
 }
 
@@ -102,7 +102,7 @@ impl SubcommandOutput for Result<(), std::io::Error> {
 /// futures are very large, this prevents the stack from getting blown out from passing them by value up
 /// the callchain (especially in debug mode when Rust doesn't have a chance to elide copies!).
 #[inline(always)]
-fn spawn_subcommand<F: Future<Output = T> + 'static, T: SubcommandOutput>(
+pub fn spawn_subcommand<F: Future<Output = T> + 'static, T: SubcommandOutput>(
   f: F,
 ) -> JoinHandle<Result<i32, AnyError>> {
   // the boxed_local() is important in order to get windows to not blow the stack in debug
@@ -794,7 +794,7 @@ async fn resolve_flags_and_init(
   Ok(flags)
 }
 
-fn init_v8(flags: &Flags) {
+pub fn init_v8(flags: &Flags) {
   let default_v8_flags = match flags.subcommand {
     DenoSubcommand::Lsp => vec![
       "--stack-size=1024".to_string(),
@@ -838,7 +838,7 @@ fn init_logging(
 
 #[cfg(unix)]
 #[allow(clippy::type_complexity)]
-fn wait_for_start(
+pub fn wait_for_start(
   args: &[std::ffi::OsString],
   roots: LibWorkerFactoryRoots,
 ) -> Option<
